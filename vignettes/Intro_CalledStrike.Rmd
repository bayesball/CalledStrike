---
title: "Introduction to CalledStrike Package"
author: "Jim Albert"
date: "3/13/2019"
output: html_document
---

```{r setup, include=FALSE}
knitr::opts_chunk$set(echo = TRUE,
                      warning = FALSE,
                      message = FALSE)
```

#### Introduction

The package CalledStrike was written to facilitate the construction of heat and contour graphs for Statcast batting data.  

Before we describe the particular functions, let's introduce some of the basic variables measured at a pitch-by-pitch level.

#### Swing on the pitch?

When a batter receives a pitch, he has to decide whether or not to swing.  We define the **swing rate** to be the proportion of pitches that are swung at.

If the batter does not swing, the umpire will call a ball or a strike.  The **called strike rate** is the rate of not-swung pitches that are called strike.

#### Outcome of the swing?

If the batter does decide to swing, then he can either make contact (a foul ball or a ball put in play) or miss.  The **miss rate** is the rate of swung pitches that are missed.

#### Ball-in-play variables

If a ball is put into play, then there are a number of measurements.  The **launch speed**, the **launch angle** and **spray angle** are recorded off of the bat.   The **hit rate** is the rate of balls in play that are base hits (this is not the same as the batting average).  The **home run rate** is the rate of balls in play that are home runs.

#### The Zone

The location of the pitched ball about the zone is recorded for all pitches.  Each of the eight measurements described above is best understood in the context of the pitch location.  For example, a batter will tend to swing at a pitch in the zone, and the quality of a batted ball depends on the pitch location.  Using this package, one can easily graph smoothed measurements as a function of the horizontal and vertical locations of the pitch.

#### The 2018 Mike Trout

Let's explore these eight measurements about the zone for Mike Trout in the 2018 season.

First, we need to scrape the data from Baseball Savant.

```{r}
library(CalledStrike)
trout <- collect_player("Mike Trout")
```

Swing rate:

```{r}
compare_contour(trout, type = "sw")
```

Miss rate:

```{r}
compare_contour(trout, type = "ms")
```

Launch speed:

```{r}
compare_contour(trout, type = "ls")
```

Launch angle:

```{r}
compare_contour(trout, type = "la")
```

Spray angle:

```{r}
compare_contour(trout, type = "sa")
```

In-play hit rate:

```{r}
compare_contour(trout, type = "h")
```

In-play home run rate:

```{r}
compare_contour(trout, type = "hr")
```

#### Comparison of Players

Next we compare four home run hitters for the 2018 season.

```{r}
dfs <- collect_many_players(c("Khris Davis",
                              "Nolan Arenado",
                              "Joey Gallo",
                              "Giancarlo Stanton"))
```


```{r}
compare_contour(dfs, type = "sw")
```

```{r}
compare_contour(dfs, type = "ms")
```

```{r}
compare_contour(dfs, type = "ls")
```

```{r}
compare_contour(dfs, type = "hr")
```

